<!DOCTYPE html>
<html>
<body>
    <link rel="stylesheet" href="reNwWd.css">
    <div id="container">
        <h1>Tip Calculator</h1>
        <div id="calculator">


            <form method="post">
                <p>How much was your bill?
                <p>

                    $ <input id="billamt" type="number" placeholder="Bill Amount">

                <p>How was your service?
                <p>



                    <input type="radio" name="serviceQual" value="0.3">30&#37; &#45; Outstanding
                    <br />
                    <input type="radio" name="serviceQual" value="0.2">20&#37; &#45; Good
                    <br />
                    <input type="radio" name="serviceQual" value="0.15">15&#37; &#45; It was OK
                    <br />
                    <input type="radio" name="serviceQual" value="0.1">10&#37; &#45; Bad
                    <br />
                    <input type="radio" name="serviceQual" value="0.05">5&#37; &#45; Terrible
                    <br />





                <p>How many people are sharing the bill?</p>
                <select id="numOfPeople">
                    <option disabled selected value="1">-- Number of people --</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

                <button type="button" id="calculate" >Calculate!</button>

        </div>
        <!--calculator end-->
        <div id="totalTip">
            <sup>$</sup><span id="tip">0.00</span>
            <small id="each">each</small>
        </div>
        <!--totalTip end-->

    </div>
    <!--container end-->

    <script>
function calculateTip() {
    var billAmt = document.getElementById("billamt").value;
    var serviceQual1 = document.getElementsByName("serviceQual");
    var serviceQual;
    for (var i = 0, length = serviceQual1.length; i < length; i++) {
        if (serviceQual1[i].checked) {
        serviceQual = document.getElementsByName("serviceQual")[i].value;
        }
    }
   
    var numOfPeople = document.getElementById("numOfPeople").value;
    
    
    if (billAmt === "" || serviceQual == 0) {
        alert("Please enter values");
        return;
    }
    
    if (numOfPeople === "" || numOfPeople <= 1) {
        numOfPeople = 1;
        document.getElementById("each").style.display = "none";
    } else {
        document.getElementById("each").style.display = "block";
    }

    
    var total = (billAmt * serviceQual) / numOfPeople;
    
    total = Math.round(total * 100) / 100;
    
    total = total.toFixed(2);

   var d = total;
    alert('total='+d);
    document.getElementById("totalTip").style.display = "block";
    document.getElementById("tip").innerHTML = total;


   

    





}document.getElementById("totalTip").style.display = "none";
document.getElementById("each").style.display = "none";
function myFunction() {
    var serviceQual1 = document.getElementsByName("serviceQual");
    for (var i = 0, length = serviceQual1.length; i < length; i++) {
        if (serviceQual1[i].checked) {
            serviceQual = document.getElementsByName("serviceQual")[i].value;
        }
    }
    var a = document.getElementById("billamt").value;
    var b = serviceQual;
    var c = document.getElementById("numOfPeople").value;
    
    alert('bill amount='+a);
    alert('service quality='+b);
    alert('numbe of people =' + c);
    const API_URL = 'http://127.0.0.1:5000/'
    const input = document.getElementById('billamt')

    const handleResponse = ({ target }) => {
        // Do something useful here...
        console.log(target.responseText)
    }

    const handleInput = ({ target }) => {
        const xhr = new XMLHttpRequest()
        const data = new FormData()

        data.append('input', target.value)
        xhr.addEventListener('load', handleResponse)
        xhr.open('POST', API_URL)
        xhr.send(data)
    }
    
}

document.getElementById("calculate").onclick = function () {
    calculateTip();
    myFunction();

   // var imported = document.createElement('script');
   // imported.src = '/dbcon.js';
    //debugger;
    //document.head.appendChild(imported);
    
};

</script>
    </form>
</body>
</html>